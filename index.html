<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <div class="container">
        <h1>Ziemassvētku laiks</h1>
        <p>
            Ziemassvētku laiks ir brīdis, kad īpaši izjūtam mīlestības, rūpju un dāvināšanas nozīmi. Mājdzīvnieki - mūsu uzticamākie draugi - sniedz mums beznosacījumu mīlestību, bet daudzi no tiem cieš no pamestības un vientulības. Šajos svētkos aicinām ikvienu atcerēties arī par tiem, kuri mūs uztver kā visu savu pasauli! Parūpēsimies, lai neviens dzīvnieks nepaliek novārtā, un kopā radīsim pasauli, kurā mīlestība un rūpes tiek ikkatram, arī četrkājainajiem ģimenes locekļiem.
        </p>
    </div>

    <div class="container2">
        <div class="box">
            <i class="fas fa-hand-holding-heart box-icon"></i>
            <p class="box-title">Saikne un uzticība</p>
            <p>Dzīvnieki sniedz beznosacījumu mīlestību un uzticību, un tas ir mūsu pienākums šo uzticību nesagraut.</p>
        </div>

        <div class="box">
            <i class="fas fa-user-shield box-icon"></i>
            <p class="box-title">Atbildība</p>
            <p>Mājdzīvnieks ir ģimenes loceklis, kas ir pilnībā atkarīgs no sava saimnieka.</p>
        </div>

        <div class="box">
            <i class="fas fa-heartbeat box-icon"></i>
            <p class="box-title">Veselība un drošība</p>
            <p>Pamesti dzīvnieki ir pakļauti bada, slimību un plēsēju uzbrukumiem, kas apdraud viņu dzīvību.</p>
        </div>

        <div class="box">
            <i class="fas fa-users box-icon"></i>
            <p class="box-title">Ietekme uz sabiedrību</p>
            <p>Pamesti mājdzīvnieki bieži kļūst par klaiņojošiem dzīvniekiem, radot sabiedrības drošības riskus.</p>
        </div>

        <div class="box">
            <i class="fas fa-gavel box-icon"></i>
            <p class="box-title">Morālās vērtības</p>
            <p>Rūpes par mājdzīvnieku atspoguļo mūsu cilvēcību un empātiju pret dzīvo radību.</p>
        </div>

        <div class="box">
            <i class="fas fa-handshake box-icon"></i>
            <p class="box-title">Likums</p>
            <p>Dzīvnieku atstāšana novārtā ir likuma pārkāpums.</p>
        </div>
    </div>


    <div class="container3">
        <h1>Mājdzīvnieka rūpes un uzvedība</h1>
    
        <button class="accordion">Ko apsvērt, pirms mājdzīvnieka iegādes?</button>
        <div class="panel">
            <ul>
                <li>Rūpes par dzīvnieku ir ilgtermiņa. Piemēram, suņi un kaķi dzīvo 10 - 20 gadus.</li>
                <li>Mājdzīvniekam nepieciešama ikdienas uzmanība. Ko iesāksiet, ja dosieties ceļojumā?</li>
                <li>Ir nepieciešamas finanses barošanai. Turklāt arī mājdzīvnieki mēdz saslimt, un tiem nav bezmaksas veselības aprūpe.</li>
            </ul>
        </div>

        <button class="accordion">Ko iesākt, ja tomēr nevarat vairs parūpēties?</button>
        <div class="panel">
            <ul>
                <li>Atcerieties, ka dzīvnieks nav lieta, bet gan dzīva radība!</li>
                <li>Vēlams censties atrast jaunas, mīlošas mājas pie cilvēkiem, kurus pazīstat.</li>
                <li>Konsultējaties ar dzīvnieku patversmēm.</li>
                <li>Nākošos saimniekus vai patversmi informējiet par patieso dzīvnieka veselības stāvokli.</li>
            </ul>
        </div>
    
        <button class="accordion">Kā rīkoties, ja pamanat pamestu mājdzīvnieku?</button>
        <div class="panel">
            <ul>
                <li>Pārliecinieties par situāciju - dažkārt saimnieks ir tālāk nekā vajadzētu būt.</li>
                <li>Par prioritāti ņemot savu drošību, mēģiniet dzīvnieku piesaukt un noskaidrot, vai ir kāda norāde par īpašnieku (piemēram, piekariņš pie kaklsiksnas).</li>
                <li>Ja dzīvnieks labprātīgi nenāk pie Jums, necentieties to ķert un piespiest!</li>
                <li>Sazinieties ar tuvāko patversmi vai zvaniet policijai uz 112.</li>
            </ul>
        </div>
    </div>

    <div class="container4">
        <h1>Saliec puzli cik vien atri tu vari!</h1>
        <div id="timer">0:00</div>
        <div id="puzzleContainer"></div>
        <div id="successMessage">
            Apsveicu tu saliki puzli! Vai velies savu laiku saglabat?
            <br>
            <input type="text" name="username "id="username" placeholder="Tavs vārds">
            <button id="saveTimeBtn">Saglabāt laiku</button>
        </div>
    </div>


    <script>
document.addEventListener("DOMContentLoaded", function () {
    const puzzleContainer = document.getElementById('puzzleContainer');
    const successMessage = document.getElementById('successMessage');
    const timerDisplay = document.getElementById('timer'); // Timer display element

    const pieceData = [
        "piece_0_0.png", "piece_0_1.png", "piece_0_2.png", "piece_0_3.png", "piece_0_4.png",
        "piece_1_0.png", "piece_1_1.png", "piece_1_2.png", "piece_1_3.png", "piece_1_4.png",
        "piece_2_0.png", "piece_2_1.png", "piece_2_2.png", "piece_2_3.png", "piece_2_4.png"
    ];

    // Correct positions for the pieces (indexes match the array order)
    const correctPositions = [...Array(pieceData.length).keys()];

    // Add pieces to the puzzle container
    function addPiecesToPuzzle() {
        const randomizedPieces = shuffleArray(pieceData.slice()); // Randomize the pieces

        randomizedPieces.forEach((piece, index) => {
            const pieceDiv = document.createElement('div');
            pieceDiv.classList.add('piece');
            pieceDiv.draggable = true;

            // Set the current position for the piece
            pieceDiv.dataset.position = index; // This is the current position of the piece
            pieceDiv.dataset.correctPosition = index; // Correct position in the grid

            const img = document.createElement('img');
            img.src = `png/puzzle/${piece}`;
            pieceDiv.appendChild(img);
            puzzleContainer.appendChild(pieceDiv);

            // Event listeners for drag and drop
            pieceDiv.addEventListener('dragstart', dragStart);
            pieceDiv.addEventListener('dragover', dragOver);
            pieceDiv.addEventListener('drop', drop);
            pieceDiv.addEventListener('dragend', dragEnd);
        });
    }

    let draggedPiece = null;
    let timerStarted = false;
    let startTime = null;
    let timerInterval = null;

    function dragStart(e) {
        draggedPiece = this;
        this.classList.add('dragging');

        if (!timerStarted) {
            // Start the timer when the first piece is moved
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000); // Update every second
            timerStarted = true;
        }
    }

    function dragOver(e) {
        e.preventDefault(); // Allow drop
    }

    function drop() {
        if (draggedPiece !== this) {
            // Swap positions of the dragged piece and the target piece
            const draggedPosition = draggedPiece.dataset.position;
            const targetPosition = this.dataset.position;

            // Swap the positions in the dataset
            draggedPiece.dataset.position = targetPosition;
            this.dataset.position = draggedPosition;

            // Swap the HTML content (swap the images visually)
            const draggedImg = draggedPiece.querySelector('img');
            const targetImg = this.querySelector('img');

            // Swap the image elements' sources directly
            const tempSrc = draggedImg.src;
            draggedImg.src = targetImg.src;
            targetImg.src = tempSrc;
        }

        // After swapping, check if the puzzle is solved
        if (isPuzzleSolved()) {
            successMessage.style.display = 'block';
            clearInterval(timerInterval); // Stop the timer when puzzle is solved
        }
    }

    function dragEnd() {
        this.classList.remove('dragging');
    }

    // Updated isPuzzleSolved function
    function isPuzzleSolved() {
        // Check if all pieces are in their correct position
        return [...puzzleContainer.children].every((piece, index) => {
            // Ensure that the position matches the correct one
            return parseInt(piece.dataset.position) === correctPositions[index];
        });
    }

    // Timer update function
    function updateTimer() {
        const elapsedTime = Math.floor((Date.now() - startTime) / 1000);
        const minutes = Math.floor(elapsedTime / 60);
        const seconds = elapsedTime % 60;
        timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
    }

    // Shuffle function to randomize the array of pieces
    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex, temporaryValue;
        // While there remain elements to shuffle
        while (currentIndex !== 0) {
            // Pick a remaining element
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex -= 1;
            // Swap it with the current element
            temporaryValue = array[currentIndex];
            array[currentIndex] = array[randomIndex];
            array[randomIndex] = temporaryValue;
        }
        return array;
    }

    addPiecesToPuzzle(); // Initialize puzzle

            // Timer Update Function
            function updateTimer() {
                const elapsedTime = Math.floor((Date.now() - startTime) / 1000); // Get elapsed time in seconds
                const minutes = Math.floor(elapsedTime / 60);
                const seconds = elapsedTime % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`; // Update the timer display
            }

            saveTimeBtn.addEventListener('click', function() {
                const username = usernameInput.value;
                const elapsedTime = Math.floor((Date.now() - startTime) / 1000); // Get elapsed time in seconds
                const minutes = Math.floor(elapsedTime / 60);
                const seconds = elapsedTime % 60;
                const timeFormatted = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                if (username.trim() !== "") {
                    // Create a new FormData object
                    const formData = new FormData();
                    formData.append("username", username);
                    formData.append("time", timeFormatted);
                    // Send the data via AJAX
                    fetch("savetime.php", {
                        method: "POST",
                        body: formData
                    })
                    .then(response => response.text())
                    .then(data => {
                        console.log("Server Response: " + data); // Log the server's response
                    })
                    .catch(error => {
                        console.error("Error saving time: ", error);
                    });
                } else {
                    alert("Lūdzu ievadi savu vārdu!");
                }
            });

        });

    </script>
    
    
    
    
    
    
    <script src="script.js"></script>
</body>
</html>